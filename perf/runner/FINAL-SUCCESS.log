
> runner@1.0.0 start
> ts-node src/index.ts --client-public-ip 46.224.73.91 --server-public-ip 188.245.187.195 --test-filter js-libp2p --testing

= Starting benchmark with 1 iterations on implementations js-libp2p
= run 1 pings from client to server
= run 1 iPerf TCP from client to server
cat: pidfile: No such file or directory
kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
rm: cannot remove 'pidfile': No such file or directory
rm: cannot remove 'server.log': No such file or directory


iperf3: error - unable to send control message: Bad file descriptor
Warning: iPerf test failed: Command failed: ssh -o StrictHostKeyChecking=no root@46.224.73.91 'iperf3 -c 188.245.187.195 -t 1 -N'
iperf3: error - unable to send control message: Bad file descriptor

= Building implementations for js-libp2p on 188.245.187.195
Transfer starting: 46 files
impl/js-libp2p/webrtc-roamhq-wrtc/index.js
           3790 100%    2.21MB/s   00:00:00 (xfer#1, to-check=34/46)

sent 2621 bytes  received 78 bytes  14740 bytes/sec
total size is 456758  speedup is 169.23

npm notice
npm notice New major version of npm available! 10.9.4 -> 11.6.4
npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.6.4
npm notice To update run: npm install -g npm@11.6.4
npm notice
npm warn deprecated rimraf@3.0.2: Rimraf versions prior to v4 are no longer supported
npm warn deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
npm notice
npm notice New major version of npm available! 10.9.4 -> 11.6.4
npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.6.4
npm notice To update run: npm install -g npm@11.6.4
npm notice
make -C js-libp2p/v2.8/.
make[1]: Entering directory '/root/impl/js-libp2p/v2.8'
docker run --rm -v "/root/impl/js-libp2p/v2.8":/usr/src/myapp -w /usr/src/myapp node:22-alpine npm ci

added 93 packages, and audited 94 packages in 3s

15 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
make[1]: Leaving directory '/root/impl/js-libp2p/v2.8'
make -C js-libp2p/webrtc-node-datachannel/.
make[1]: Entering directory '/root/impl/js-libp2p/webrtc-node-datachannel'
docker run --rm -v "/root/impl/js-libp2p/webrtc-node-datachannel":/usr/src/myapp -w /usr/src/myapp node:22-alpine npm ci

added 474 packages, and audited 475 packages in 17s

48 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
make[1]: Leaving directory '/root/impl/js-libp2p/webrtc-node-datachannel'
make -C js-libp2p/webrtc-roamhq-wrtc/.
make[1]: Entering directory '/root/impl/js-libp2p/webrtc-roamhq-wrtc'
Dependencies pre-installed via GitHub reference
make[1]: Leaving directory '/root/impl/js-libp2p/webrtc-roamhq-wrtc'

= Building implementations for js-libp2p on 46.224.73.91
Transfer starting: 46 files
impl/js-libp2p/webrtc-roamhq-wrtc/index.js
           3790 100%    8.21MB/s   00:00:00 (xfer#1, to-check=34/46)

sent 2621 bytes  received 78 bytes  14821 bytes/sec
total size is 456758  speedup is 169.23

npm notice
npm notice New major version of npm available! 10.9.4 -> 11.6.4
npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.6.4
npm notice To update run: npm install -g npm@11.6.4
npm notice
npm warn deprecated rimraf@3.0.2: Rimraf versions prior to v4 are no longer supported
npm warn deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
npm notice
npm notice New major version of npm available! 10.9.4 -> 11.6.4
npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.6.4
npm notice To update run: npm install -g npm@11.6.4
npm notice
make -C js-libp2p/v2.8/.
make[1]: Entering directory '/root/impl/js-libp2p/v2.8'
docker run --rm -v "/root/impl/js-libp2p/v2.8":/usr/src/myapp -w /usr/src/myapp node:22-alpine npm ci

added 93 packages, and audited 94 packages in 3s

15 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
make[1]: Leaving directory '/root/impl/js-libp2p/v2.8'
make -C js-libp2p/webrtc-node-datachannel/.
make[1]: Entering directory '/root/impl/js-libp2p/webrtc-node-datachannel'
docker run --rm -v "/root/impl/js-libp2p/webrtc-node-datachannel":/usr/src/myapp -w /usr/src/myapp node:22-alpine npm ci

added 474 packages, and audited 475 packages in 16s

48 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
make[1]: Leaving directory '/root/impl/js-libp2p/webrtc-node-datachannel'
make -C js-libp2p/webrtc-roamhq-wrtc/.
make[1]: Entering directory '/root/impl/js-libp2p/webrtc-roamhq-wrtc'
Dependencies pre-installed via GitHub reference
make[1]: Leaving directory '/root/impl/js-libp2p/webrtc-roamhq-wrtc'

= Benchmark throughput/upload on versions js-libp2p, js-libp2p
== Version js-libp2p/v2.8
=== Starting server js-libp2p/v2.8
bash: line 1: kill: (33948) - No such process
rm: cannot remove '/tmp/webrtc-listen-addrs.txt': No such file or directory


=== Starting client js-libp2p/v2.8/tcp
== Version js-libp2p/webrtc-roamhq-wrtc
=== Starting server js-libp2p/webrtc-roamhq-wrtc
rm: cannot remove '/tmp/webrtc-listen-addrs.txt': No such file or directory


=== Waiting for WebRTC Direct server listen address...
=== Captured server listen address: /ip4/188.245.187.195/udp/4001/webrtc-direct/certhash/uEiDEp8C3sn2aflI0_FfghopTqQc8DRPhek2ml7MMXrdZeQ/p2p/12D3KooWAkEkcySztdtvDuinvWbZUbyHnv2PQe1egBmdb6YwHwTN
=== Starting client js-libp2p/webrtc-roamhq-wrtc/webrtc-direct
TypeError: stream.sink is not a function
    at Perf.measurePerformance (file:///root/impl/js-libp2p/webrtc-roamhq-wrtc/node_modules/@libp2p/perf/dist/src/perf-service.js:102:20)
    at async main (file:///root/impl/js-libp2p/webrtc-roamhq-wrtc/index.js:112:22)
./impl/js-libp2p/webrtc-roamhq-wrtc/perf: line 6: kill: (27592) - No such process
Command failed: ssh -o StrictHostKeyChecking=no root@46.224.73.91 'for i in {1..1}; do timeout 5s ./impl/js-libp2p/webrtc-roamhq-wrtc/perf --server-address /ip4/188.245.187.195/udp/4001/webrtc-direct/certhash/uEiDEp8C3sn2aflI0_FfghopTqQc8DRPhek2ml7MMXrdZeQ/p2p/12D3KooWAkEkcySztdtvDuinvWbZUbyHnv2PQe1egBmdb6YwHwTN --transport webrtc-direct --upload-bytes 9007199254740991 --download-bytes 0 || [ $? -eq 124 ]; done'
